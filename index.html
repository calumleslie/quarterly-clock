<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Quarterly Clock</title>
    <style>
        canvas {
            width: 100%;
            height: 100%;
        }
    </style>
  </head>
  <body>
    <canvas id="clock">
    </canvas>
  </body>
  <script src="https://unpkg.com/dayjs@1.8.21/dayjs.min.js"></script>
  <script src="https://unpkg.com/dayjs@1.8.21/plugin/weekOfYear.js"></script>
  <script>
    dayjs.extend(window.dayjs_plugin_weekOfYear);
    console.log("Hola, today is " + dayjs().format());    
    const canvas = document.getElementById("clock");
    const context = canvas.getContext("2d");
    const width = canvas.width;
    const height = canvas.height;
    const centerX = width / 2;
    const centerY = height / 2;

    const weekOfYear = dayjs().week();
    const yearFraction = weekOfYear / 52.0;
    
    const radius = Math.min(width, height) * 0.5 * 0.9;
    context.beginPath();
    context.arc(centerX, centerY, radius, -0.5 * Math.PI, ((yearFraction * 2.0) - 0.5) * Math.PI);
    context.stroke();

    const quarter = Math.ceil(yearFraction * 4.0);
    context.textAlign = "center";
    context.font = "25px Arial";
    context.fillText(`Q${quarter.toFixed(0)}`, centerX, centerY); 
  </script>
</html>